<html>
 <head>
 <title>TIM</title>

<!-- BEGIN LivePerson Monitor. -->
<script type="text/javascript">window.lpTag=window.lpTag||{},'undefined'==typeof window.lpTag._tagCount?(window.lpTag={wl:lpTag.wl||null,scp:lpTag.scp||null,site:'42287764'||'',section:lpTag.section||'',tagletSection:lpTag.tagletSection||null,autoStart:lpTag.autoStart!==!1,ovr:lpTag.ovr||{},_v:'1.10.0',_tagCount:1,protocol:'https:',events:{bind:function(t,e,i){lpTag.defer(function(){lpTag.events.bind(t,e,i)},0)},trigger:function(t,e,i){lpTag.defer(function(){lpTag.events.trigger(t,e,i)},1)}},defer:function(t,e){0===e?(this._defB=this._defB||[],this._defB.push(t)):1===e?(this._defT=this._defT||[],this._defT.push(t)):(this._defL=this._defL||[],this._defL.push(t))},load:function(t,e,i){var n=this;setTimeout(function(){n._load(t,e,i)},0)},_load:function(t,e,i){var n=t;t||(n=this.protocol+'//'+(this.ovr&&this.ovr.domain?this.ovr.domain:'lptag.liveperson.net')+'/tag/tag.js?site='+this.site);var o=document.createElement('script');o.setAttribute('charset',e?e:'UTF-8'),i&&o.setAttribute('id',i),o.setAttribute('src',n),document.getElementsByTagName('head').item(0).appendChild(o)},init:function(){this._timing=this._timing||{},this._timing.start=(new Date).getTime();var t=this;window.attachEvent?window.attachEvent('onload',function(){t._domReady('domReady')}):(window.addEventListener('DOMContentLoaded',function(){t._domReady('contReady')},!1),window.addEventListener('load',function(){t._domReady('domReady')},!1)),'undefined'===typeof window._lptStop&&this.load()},start:function(){this.autoStart=!0},_domReady:function(t){this.isDom||(this.isDom=!0,this.events.trigger('LPT','DOM_READY',{t:t})),this._timing[t]=(new Date).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],hooks:lpTag.hooks||[],identities:lpTag.identities||[],ev:lpTag.ev||[]},lpTag.init()):window.lpTag._tagCount+=1;</script>
<!-- END LivePerson Monitor. -->



<script src="https://track.adform.net/serving/scripts/trackpoint/async/"></script>




<script type="text/javascript">

var meta = document.createElement('meta');
meta.name = "viewport";
meta.content = "width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no";
document.getElementsByTagName('head')[0].appendChild(meta);


window._adftrack = Array.isArray(window._adftrack) ? window._adftrack : (window._adftrack ? [window._adftrack] : []);
window._adftrack.push({
        pm: 307530,
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('Click_Bottone_Liveperson')
    });
window._adftrack.push({
        pm: 307530,
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('Chat_Interattiva_Liveperson')
    });
window._adftrack.push({
        pm: 307530,
        divider: encodeURIComponent('|'),
        pagename: encodeURIComponent('Conversione_Liveperson')
    });
	
	
	
	

	
function offeredOrNot(){
	console.log("offered");
	setTimeout(function(){
		if($(".LPMcontainer").find('div.zoom').length !== 0){
			$(".LPMcontainer").addClass( "move" );
		}
		if($(".LPMcontainer").find('div.zoommobile').length !== 0){
			$(".LPMcontainer").addClass( "movemobile" );
		}
	}, 1000);
			   
	setTimeout(function(){
		if($(".LPMcontainer").find('div.zoom').length !== 0){
			$(".LPMcontainer").removeClass( "zoom" );
			$(".LPMcontainer").removeClass( "move" );
			$(".LPMcontainer").addClass( "fix" );
			$(".LPMcontainer").addClass( "beat" );
		}
		if($(".LPMcontainer").find('div.zoommobile').length !== 0){
			$(".LPMcontainer").removeClass( "zoommobile" );
			$(".LPMcontainer").removeClass( "movemobile" );
			$(".LPMcontainer").addClass( "fixmobile" );
			$(".LPMcontainer").addClass( "beatmobile" );
		}
	}, 5000);
		
}	

	



function clickOrNot(data, eventInfo){
	console.log("click");
	if(window.console && window.JSON){
		localStorage.setItem('LPclickMD', 'yes');
		var txt = '<p style="margin:0;padding:0;border:0;"><img src="https://track.adform.net/Serving/TrackPoint/?pm=307530&ADFPageName=Click_Bottone_Liveperson&ADFdivider=|" width="1" height="1" alt="" /></p>';
		$("body").append(txt);
	}

}



function interactiveOrNot(data, eventInfo){
	if(window.console && window.JSON){
		if((data.state === "interactive") && (localStorage.getItem('LPclickMD') === "yes")){
			console.log("interactive");
			localStorage.setItem('LPinterMD', 'yes');
			localStorage.setItem('LPclickMD', '');
			lpTag.sdes = lpTag.sdes||[];
			lpTag.sdes.push({
				"type": "ctmrinfo",
				"info": {
					"cstatus": "interactive"
				}
			});
			var txt = '<p style="margin:0;padding:0;border:0;"><img src="https://track.adform.net/Serving/TrackPoint/?pm=307530&ADFPageName=Chat_Interattiva_Liveperson&ADFdivider=|" width="1" height="1" alt="" /></p>';
			$("body").append(txt);
		}
	}
}	
	


// creo gli styles necessari a LivePerson

	var style = document.createElement('style');
	style.type = 'text/css';
	var keyFrames = '\
		@keyframes heartbeat {\
		24% {\
		transform: scale( 1 );\
		}\
		27% {\
		transform: scale( 1.02 );\
		}\
		30% {\
		transform: scale( 1 );\
		}\
	}';
	style.innerHTML = keyFrames;
	document.getElementsByTagName('head')[0].appendChild(style);
	var style = document.createElement('style');
	style.type = 'text/css';
	style.innerHTML = '.beat{animation: heartbeat 5s infinite;} .move {right:0px;transform: translate(-370px, 0);transition-duration: 2s;} .zoom {position:absolute;bottom:20px;right:-351px;} .fix {right:370px !important;} .beatmobile{animation: heartbeat 5s infinite;} .movemobile {right:0px;transform: translate(-720px, 0);transition-duration: 2s;} .zoommobile {position:absolute;bottom:20px;right:-701px;} .fixmobile {right:720px !important;}'; 
	document.getElementsByTagName('head')[0].appendChild(style);
	
	
lpTag.events.bind({
    eventName : "OFFER_IMPRESSION",
    appName : "LP_OFFERS",
    func: offeredOrNot,
    triggerOnce : false
 });

//*********
//this section below tracks the page of the funnel visited.
//the Timeout function is just to be sure the page is already starting to load some object, it should be useless
//the funnel is not a pure SPA, that's why i can't track it with events, i need to use as well to check if some elements are presented or not
//*********
$(document).ready(function(){
	setTimeout(function(){
		lpTag.events.bind({
			eventName : "OFFER_CLICK",
			appName : "LP_OFFERS",
			func: clickOrNot,
			triggerOnce : false
		});

		lpTag.events.bind({
			eventName : "state",
			appName : "lpUnifiedWindow",
			func: interactiveOrNot,
			triggerOnce : false
		});
	}, 3000);

});
</script>
	 
 
 

 

 </head>
 <body>

 
 
</body>
  

  
</html>
